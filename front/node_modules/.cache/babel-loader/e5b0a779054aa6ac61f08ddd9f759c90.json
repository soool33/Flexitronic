{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Sites/stage/Flexitronic/front/src/components/Log/SignUpForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport SignInForm from \"./SignInForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SignUpForm = () => {\n  _s();\n\n  const [formSubmit, setFormSubmit] = useState(false);\n  const [pseudo, setPseudo] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [controlPassword, setControlPassword] = useState(\"\");\n\n  const handleRegister = async e => {\n    e.preventDefault();\n    const terms = document.getElementById(\"terms\");\n    const pseudoError = document.querySelector(\".pseudo.error\");\n    const emailError = document.querySelector(\".email.error\");\n    const passwordError = document.querySelector(\".password.error\");\n    const passwordConfirmError = document.querySelector(\".password-confirm.error\");\n    const termsError = document.querySelector(\".terms.error\");\n    passwordConfirmError.innerHTML = \"\";\n    termsError.innerHTML = \"\";\n\n    if (password !== controlPassword || !terms.checked) {\n      if (password !== controlPassword) passwordConfirmError.innerHTML = \"Les mots de passe ne correspondent pas\";\n      if (!terms.checked) termsError.innerHTML = \"Veuillez valider les conditions générales\";\n    } else {\n      await axios({\n        method: \"post\",\n        url: `${process.env.REACT_APP_API_URL}api/user/register`,\n        data: {\n          pseudo,\n          email,\n          password\n        }\n      }).then(res => {\n        console.log(res);\n\n        if (res.data.errors) {\n          pseudoError.innerHTML = res.data.errors.pseudo;\n          emailError.innerHTML = res.data.errors.email;\n          passwordError.innerHTML = res.data.errors.password;\n        } else {\n          setFormSubmit(true);\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: formSubmit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(SignInForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"success\",\n        children: \"Enregistrement r\\xE9ussi, veuillez-vous connecter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"\",\n      onSubmit: handleRegister,\n      id: \"sign-up-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"pseudo\",\n        children: \"Pseudo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pseudo\",\n        id: \"pseudo\",\n        onChange: e => setPseudo(e.target.value),\n        value: pseudo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pseudo error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        id: \"email\",\n        onChange: e => setEmail(e.target.value),\n        value: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"email error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Mot de passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        onChange: e => setPassword(e.target.value),\n        value: password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"password error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password-conf\",\n        children: \"Confirmer mot de passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"password-conf\",\n        onChange: e => setControlPassword(e.target.value),\n        value: controlPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"password-confirm error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Valider inscription\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n\n_s(SignUpForm, \"zuBpTmdP4YRPQ6ZaQpYYGosTei8=\");\n\n_c = SignUpForm;\nexport default SignUpForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpForm\");","map":{"version":3,"names":["React","useState","axios","SignInForm","SignUpForm","formSubmit","setFormSubmit","pseudo","setPseudo","email","setEmail","password","setPassword","controlPassword","setControlPassword","handleRegister","e","preventDefault","terms","document","getElementById","pseudoError","querySelector","emailError","passwordError","passwordConfirmError","termsError","innerHTML","checked","method","url","process","env","REACT_APP_API_URL","data","then","res","console","log","errors","catch","err","target","value"],"sources":["/Users/mac/Sites/stage/Flexitronic/front/src/components/Log/SignUpForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport SignInForm from \"./SignInForm\";\n\n\nconst SignUpForm = () => {\n    const [formSubmit, setFormSubmit] = useState(false);\n    const [pseudo, setPseudo] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [controlPassword, setControlPassword] = useState(\"\");\n\n    const handleRegister = async (e) => {\n        e.preventDefault();\n        const terms = document.getElementById(\"terms\");\n        const pseudoError = document.querySelector(\".pseudo.error\");\n        const emailError = document.querySelector(\".email.error\");\n        const passwordError = document.querySelector(\".password.error\");\n        const passwordConfirmError = document.querySelector(\n            \".password-confirm.error\"\n        );\n        const termsError = document.querySelector(\".terms.error\");\n\n        passwordConfirmError.innerHTML = \"\";\n        termsError.innerHTML = \"\";\n\n        if (password !== controlPassword || !terms.checked) {\n            if (password !== controlPassword)\n                passwordConfirmError.innerHTML =\n                    \"Les mots de passe ne correspondent pas\";\n\n            if (!terms.checked)\n                termsError.innerHTML = \"Veuillez valider les conditions générales\";\n        } else {\n            await axios({\n                method: \"post\",\n                url: `${process.env.REACT_APP_API_URL}api/user/register`,\n                data: {\n                    pseudo,\n                    email,\n                    password,\n                },\n            })\n                .then((res) => {\n                    console.log(res);\n                    if (res.data.errors) {\n                        pseudoError.innerHTML = res.data.errors.pseudo;\n                        emailError.innerHTML = res.data.errors.email;\n                        passwordError.innerHTML = res.data.errors.password;\n                    } else {\n                        setFormSubmit(true);\n                    }\n                })\n                .catch((err) => console.log(err));\n        }\n    };\n\n    return (\n        <>\n            {formSubmit ? (\n                <>\n                    <SignInForm />\n                    <span></span>\n                    <h4 className=\"success\">\n                        Enregistrement réussi, veuillez-vous connecter\n                    </h4>\n                </>\n            ) : (\n                <form action=\"\" onSubmit={handleRegister} id=\"sign-up-form\">\n                    <label htmlFor=\"pseudo\">Pseudo</label>\n                    <br />\n                    <input\n                        type=\"text\"\n                        name=\"pseudo\"\n                        id=\"pseudo\"\n                        onChange={(e) => setPseudo(e.target.value)}\n                        value={pseudo}\n                    />\n                    <div className=\"pseudo error\"></div>\n                    <br />\n                    <label htmlFor=\"email\">Email</label>\n                    <br />\n                    <input\n                        type=\"text\"\n                        name=\"email\"\n                        id=\"email\"\n                        onChange={(e) => setEmail(e.target.value)}\n                        value={email}\n                    />\n                    <div className=\"email error\"></div>\n                    <br />\n                    <label htmlFor=\"password\">Mot de passe</label>\n                    <br />\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        id=\"password\"\n                        onChange={(e) => setPassword(e.target.value)}\n                        value={password}\n                    />\n                    <div className=\"password error\"></div>\n                    <br />\n                    <label htmlFor=\"password-conf\">Confirmer mot de passe</label>\n                    <br />\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        id=\"password-conf\"\n                        onChange={(e) => setControlPassword(e.target.value)}\n                        value={controlPassword}\n                    />\n                    <div className=\"password-confirm error\"></div>\n                    <br />\n                    <input type=\"submit\" value=\"Valider inscription\" />\n                </form>\n            )}\n        </>\n    );\n};\n\nexport default SignUpForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}